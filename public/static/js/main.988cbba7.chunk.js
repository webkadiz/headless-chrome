(window.webpackJsonpfrontend=window.webpackJsonpfrontend||[]).push([[0],{24:function(e,t,n){e.exports={"creation-tender":"CreationTender_creation-tender__3zHyH",creationTender:"CreationTender_creation-tender__3zHyH","form-container":"CreationTender_form-container__1DHOM",formContainer:"CreationTender_form-container__1DHOM",form:"CreationTender_form__2QB3C",input:"CreationTender_input__yg2br",btn:"CreationTender_btn__xpb6Q"}},25:function(e,t,n){e.exports={"editing-tender":"EditingTender_editing-tender__1jwBa",editingTender:"EditingTender_editing-tender__1jwBa","form-container":"EditingTender_form-container__3rBTW",formContainer:"EditingTender_form-container__3rBTW",form:"EditingTender_form__2siX1",input:"EditingTender_input__3mMna",btn:"EditingTender_btn__1lhfB"}},30:function(e,t,n){e.exports={main:"Main_main__3JhNz","tenders-wrapper":"Main_tenders-wrapper__3NZAa",tendersWrapper:"Main_tenders-wrapper__3NZAa","none-tenders":"Main_none-tenders__2G-6A",noneTenders:"Main_none-tenders__2G-6A","progress-wrapper":"Main_progress-wrapper__wx5V0",progressWrapper:"Main_progress-wrapper__wx5V0"}},53:function(e,t,n){e.exports={wrapper:"App_wrapper__1Jn2B"}},65:function(e,t,n){e.exports=n(94)},70:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(32),o=n.n(i),d=(n(70),n(52)),c=n(59),l=n(14),s=n(15),u=n(17),m=n(16),p=n(18),f=n(53),h=n.n(f),b=n(21),g=n(11),v=r.a.createContext(),T=n(9),E=n(110),y=n(107),_=n(29),O=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.context,t=e.tenders,n=e.setEditableTender,i=this.props.requestDeleteTender;return r.a.createElement(E.a,{disabled:!0},t.map(function(e,t){var o=e.tenderName;return r.a.createElement(a.Fragment,{key:t},r.a.createElement(y.b,{ripple:"unbounded"},o,r.a.createElement(y.c,{icon:r.a.createElement(r.a.Fragment,null,r.a.createElement(g.b,{to:"editing-tender"},r.a.createElement(_.a,{icon:"edit",onClick:n.bind(null,o)})),r.a.createElement(_.a,{icon:"close",onClick:i.bind(null,o)}))})),r.a.createElement(y.a,null))}))}}]),t}(a.Component);O.contextType=v;var k=n(30),w=n.n(k),x=n(57),C=n(111),j=n(58),N=n(19),D=n.n(N),S=n(109),L=Object(S.b)(),B=n(26),M=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={nameOfDeleteTender:"",isDialogOpen:!1,dialogTitle:"",neverShowDialogCheckbox:!1,isTenderDeleteLoading:!1},n.requestDeleteTender=function(e){if(n.state.neverShowDialogCheckbox)n.deleteTender(e);else{var t="\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u043d\u0434\u0435\u0440: ".concat(e,"?");console.log("request delete tender"),n.setState(function(n){return{isDialogOpen:!0,dialogTitle:t,nameOfDeleteTender:e}})}},n.closeDialog=function(e){var t=e.detail.action;"close"===t?n.setState({neverShowDialogCheckbox:!1}):"accept"===t&&n.deleteTender(n.state.nameOfDeleteTender),n.setState({isDialogOpen:!1})},n.deleteTender=function(e){n.state.isTenderDeleteLoading||(n.setState({isTenderDeleteLoading:!0}),D.a.delete("/tender",{data:{tenderName:e}}).then(function(t){n.context.deleteTender(e),L.notify({body:"\u0422\u0435\u043d\u0434\u0435\u0440: ".concat(e," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d"),icon:"check"})}).catch(function(t){L.notify({body:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0435\u043d\u0434\u0435\u0440: ".concat(e),icon:"close"})}).finally(function(){n.setState({isTenderDeleteLoading:!1})}))},n.toggleNeverShowDialogCheckbox=function(){n.setState({neverShowDialogCheckbox:!n.state.neverShowDialogCheckbox})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isDialogOpen,n=e.dialogTitle,a=e.neverShowDialogCheckbox,i=e.isTenderDeleteLoading,o=this.context.tenders,d=this.closeDialog,c=this.toggleNeverShowDialogCheckbox,l=this.requestDeleteTender,s=w.a.main,u=w.a.tendersWrapper,m=w.a.noneTenders,p=w.a.progressWrapper;return r.a.createElement("div",{className:s},r.a.createElement(g.b,{to:"/creation-tender"},r.a.createElement(T.a,{raised:!0},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u043d\u0434\u0435\u0440")),r.a.createElement("div",{className:u},r.a.createElement("div",{className:p},i?r.a.createElement(B.a,{size:"xlarge"}):null),o.length?r.a.createElement(O,{requestDeleteTender:l}):r.a.createElement(x.a,{use:"headline4",className:m},"\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0442\u0435\u043d\u0434\u0435\u0440")),r.a.createElement(C.a,{open:t,onClose:d,preventOutsideDismiss:!0,title:n},r.a.createElement(j.a,{checked:a,onChange:c},"\u041d\u0435 \u043f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 \u044d\u0442\u043e\u0442 \u0434\u0438\u0430\u043b\u043e\u0433")))}}]),t}(a.Component);M.contextType=v;var F=n(24),P=n.n(F),A=n(35),W=n(23),z=n.n(W),H=[{name:"tenderName",label:"\u041f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u043d\u0434\u0435\u0440\u0443",value:"",error:""},{name:"tenderLink",label:"\u0410\u0434\u0440\u0435\u0441 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0442\u043e\u0440\u0433\u043e\u0432",value:"",error:""},{name:"tenderTimeEnd",label:"\u0412\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0442\u043e\u0440\u0433\u043e\u0432",value:"",error:"",type:"datetime-local"},{name:"tenderSecondsBeforeEnd",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0441\u0435\u043a\u0443\u043d\u0434 \u0434\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f \u0442\u043e\u0440\u0433\u043e\u0432, \u043a\u043e\u0433\u0434\u0430 \u0441\u0438\u0441\u0442\u0435\u043c\u0435 \u043d\u0443\u0436\u043d\u043e \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0438 \u043d\u0430\u0447\u0430\u0442\u044c \u0434\u0435\u0439\u0441\u0442\u0432\u043e\u0432\u0430\u0442\u044c",value:"",error:""},{name:"tenderMinPrice",label:"\u041c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u0430\u044f \u0441\u0443\u043c\u043c\u0430, \u043c\u0435\u043d\u044c\u0448\u0435 \u043a\u043e\u0442\u043e\u0440\u043e\u0439 \u043d\u0435 \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0442\u044c",value:"",error:""},{name:"tenderStep",label:"\u0428\u0430\u0433 \u0432 \u0440\u0443\u0431\u043b\u044f\u0445 \u043e\u0442 \u043c\u0438\u043d\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0439 \u0446\u0435\u043d\u044b, \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0438\u043b\u0438 \u043a\u043e\u043d\u043a\u0443\u0440\u0435\u043d\u0442\u044b",value:"",error:""}],I=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={textFields:z.a.cloneDeep(H),tenderLoading:!1},n.handleChangeInput=function(e,t){var a=t.target.value;n.setState(function(t){return t.textFields.find(function(t){return t.name===e}).value=a,t})},n.createTender=function(){if(!n.isLoading()){n.startLoading();var e=z.a.fromPairs(n.state.textFields.map(function(e){return[e.name,e.value]}));D.a.post("/tender",e).then(function(t){if(n.endLoading(),t.data.errors)throw n.setState(function(e){e.textFields.forEach(function(e){return e.error=""}),t.data.errors.forEach(function(t){return e.textFields.find(function(e){return e.name===t.param}).error=t.msg,e})}),new Error;n.context.addTender(e),L.notify({body:"\u0422\u0435\u043d\u0434\u0435\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d",icon:"check"}),n.props.history.push("/")}).catch(function(e){n.endLoading(),L.notify({body:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u043d\u0434\u0435\u0440",icon:"close"})})}},n.handleClickBack=function(e){n.state.tenderLoading&&e.preventDefault()},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"startLoading",value:function(){this.setState({tenderLoading:!0})}},{key:"endLoading",value:function(){this.setState({tenderLoading:!1})}},{key:"isLoading",value:function(){return this.state.tenderLoading}},{key:"render",value:function(){var e=this.state,t=e.tenderLoading,n=e.textFields,a=this.handleClickBack,i=this.handleChangeInput,o=this.createTender;return r.a.createElement("div",{className:P.a.creationTender},r.a.createElement(g.b,{to:"/",className:P.a.back,onClick:a},r.a.createElement(T.a,{raised:!0},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement("div",{className:P.a.formContainer},r.a.createElement("div",{className:P.a.form},n.map(function(e){return r.a.createElement(A.a,{outlined:!0,type:e.type,key:e.name,className:P.a.input,value:e.value,label:e.label,helpText:{children:e.error,persistent:!0},invalid:e.error,onChange:i.bind(null,e.name)})}),r.a.createElement(T.a,{className:P.a.btn,label:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u0435\u043d\u0434\u0435\u0440",raised:!0,onClick:o,icon:t?r.a.createElement(B.a,{theme:"secondary"}):null}))))}}]),t}(a.Component);I.contextType=v;var q=n(60),J=n(25),G=n.n(J),Q=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={tenderOldName:n.context.editableTender.tenderName,editableTender:n.context.editableTender,textFields:z.a.cloneDeep(H),tenderLoading:!1},n.handleClickBack=function(e){n.state.tenderLoading&&e.preventDefault()},n.handleChangeInput=function(e,t){var a=t.target.value;n.setState(function(t){return t.textFields.find(function(t){return t.name===e}).value=a,t})},n.updateTender=function(){if(!n.isLoading()){n.startLoading();var e=z.a.fromPairs(n.state.textFields.map(function(e){return[e.name,e.value]}));e.tenderOldName=n.state.tenderOldName,D.a.put("/tender",e).then(function(t){if(n.endLoading(),t.data.errors)throw n.setState(function(e){return e.textFields.forEach(function(e){return e.error=""}),t.data.errors.forEach(function(t){"tenderOldName"===t.param&&(t.param="tenderName");var n=e.textFields.find(function(e){return e.name===t.param});if(n){if(n.error)return;n.error=t.msg}}),e}),new Error;delete e.tenderOldName,n.context.updateTender(e),L.notify({body:"\u0422\u0435\u043d\u0434\u0435\u0440 ".concat(e.tenderName," \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d"),icon:"check"}),n.props.history.push("/")}).catch(function(t){n.endLoading(),L.notify({body:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0442\u0435\u043d\u0434\u0435\u0440: ".concat(e.tenderOldName),icon:"close"})})}},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){z.a.isEmpty(this.state.editableTender)?this.props.history.push("/"):this.setState(function(e){for(var t=function(){var t=a[n],i=(r=Object(q.a)(t,2))[0],o=r[1];e.textFields.find(function(e){return e.name===i}).value=o},n=0,a=Object.entries(e.editableTender);n<a.length;n++){var r;t()}return e})}},{key:"componentWillUnmount",value:function(){this.context.deleteEditableTender()}},{key:"startLoading",value:function(){this.setState({tenderLoading:!0})}},{key:"endLoading",value:function(){this.setState({tenderLoading:!1})}},{key:"isLoading",value:function(){return this.state.tenderLoading}},{key:"render",value:function(){var e=this.state.tenderLoading,t=this.handleClickBack,n=this.handleChangeInput,a=this.updateTender,i=G.a.editingTender,o=G.a.btn;return r.a.createElement("div",{className:i},r.a.createElement(g.b,{to:"/",className:G.a.back,onClick:t},r.a.createElement(T.a,{raised:!0},"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement("div",{className:G.a.formContainer},r.a.createElement("div",{className:G.a.form},this.state.textFields.map(function(e){return r.a.createElement(A.a,{outlined:!0,type:e.type,key:e.name,className:G.a.input,value:e.value,label:e.label,helpText:{children:e.error,persistent:!0},invalid:e.error,onChange:n.bind(null,e.name)})}),r.a.createElement(T.a,{className:o,label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",raised:!0,onClick:a,icon:e?r.a.createElement(B.a,{theme:"secondary"}):null}))))}}]),t}(a.Component);Q.contextType=v;function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}D.a.defaults.baseURL="",D.a.defaults.timeout=5e3;var Z=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={tenders:[{tenderName:"1",tenderLink:"https://eshop-ptz.ru/purchases/8b96a649-76b3-402b-baa9-ae195bb2eeb2",tenderTimeEnd:"2019-08-28T18:42",tenderSecondsBeforeEnd:10,tenderMinPrice:5e4,tenderStep:5},{tenderName:"2",tenderLink:"https://eshop-ptz.ru/purchases/2104b618-4976-42d9-8997-fe665d8ce428",tenderTimeEnd:"2019-08-28T18:42",tenderSecondsBeforeEnd:10,tenderMinPrice:5e4,tenderStep:5},{tenderName:"3",tenderLink:"https://eshop-ptz.ru/purchases/7f7dba54-ff56-4c43-ba9b-d2109f778cc8",tenderTimeEnd:"2019-08-28T18:42",tenderSecondsBeforeEnd:10,tenderMinPrice:5e4,tenderStep:5}],editableTender:{}},n.addTender=function(e){n.setState(function(t){return{tenders:[].concat(Object(c.a)(t.tenders),[e])}})},n.deleteTender=function(e){console.log("delete tender from app"),n.setState({tenders:n.state.tenders.filter(function(t){return t.tenderName!==e})})},n.updateTender=function(e){n.setState(function(t){var n=t.tenders.findIndex(function(e){return e.tenderName===t.editableTender.tenderName});return t.tenders.splice(n,1,e),t})},n.setEditableTender=function(e){console.log("set edit tender");var t=n.state.tenders.find(function(t){return t.tenderName===e});n.setState({editableTender:t})},n.deleteEditableTender=function(){n.setState({editableTender:{}})},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;D()("/tender").then(function(t){e.setState({tenders:t.data.tenders})}).catch(function(){L.notify({body:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u044c \u0442\u0435\u043d\u0434\u0435\u0440\u044b \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443"})})}},{key:"render",value:function(){var e=this.addTender,t=this.deleteTender,n=this.updateTender,a=this.setEditableTender,i=this.deleteEditableTender;return r.a.createElement("div",{className:h.a.wrapper},r.a.createElement(v.Provider,{value:V({},this.state,{addTender:e,deleteTender:t,updateTender:n,setEditableTender:a,deleteEditableTender:i})},r.a.createElement(b.a,{exact:!0,path:"/",component:M}),r.a.createElement(b.a,{path:"/creation-tender",component:I}),r.a.createElement(b.a,{path:"/editing-tender",component:Q}),r.a.createElement(S.a,{messages:L.messages,timeout:3e3})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(g.a,null,r.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[65,1,2]]]);
//# sourceMappingURL=main.988cbba7.chunk.js.map